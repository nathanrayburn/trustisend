<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Sign Up - TrustiSend</title>
    <link th:href="@{/css/main.css}" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" />
    <style>
        .background {
            background: linear-gradient(90deg, #d53369 0%, #daae51 100%);
        }

        .password-hints-left {
            top: 0;
            left: -300px;
            width: 250px;
        }

        .error-message {
            color: red;
            font-size: 0.875rem;
            margin-bottom: 10px;
            display: none;
        }
    </style>
</head>
<body class="leading-normal tracking-normal text-white background h-screen" style="font-family: 'Source Sans Pro', sans-serif;">
<!-- Nav -->
<nav id="header" class="fixed w-full z-30 top-0 text-white">
    <div class="w-full container mx-auto flex flex-wrap items-center justify-between mt-0 py-2">
        <div class="pl-4 flex items-center">
            <a class="toggleColour text-white no-underline hover:no-underline font-bold text-2xl lg:text-4xl" href="/#">
                <svg class="h-8 fill-current inline" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.005 512.005">
                    <rect fill="#2a2a31" x="16.539" y="425.626" width="479.767" height="50.502" />
                    <path d="M510.7 189.151C505.271 168.95 484.565 156.956 464.365 162.385L330.156 198.367 155.924 35.878 107.19 49.008 211.729 230.183 86.232 263.767 36.614 224.754 0 234.603 45.957 314.27 65.274 347.727 105.802 336.869 240.011 300.886 349.726 271.469 483.935 235.486C504.134 230.057 516.129 209.352 510.7 189.151Z" />
                </svg>
                TrustiSend
            </a>
        </div>
        <div class="pr-4 flex items-center">
            <a href="/#" class="text-gray-800 font-bold hover:text-gray-500 mr-4">Home</a>
        </div>
    </div>
</nav>

<!-- Sign Up Form -->
<div class="flex items-center justify-center h-full">
    <div class="w-full max-w-md">
        <form action="#" method="POST" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
            <h2 class="text-center text-gray-700 text-2xl mb-6">Sign Up</h2>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2" for="email">
                    Email
                </label>
                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="email" type="email" placeholder="Email">
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2" for="password">
                    Password
                </label>
                <div class="relative">
                    <input type="password" id="password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Password">
                    <div id="password-hints" class="hidden absolute z-10 bg-white shadow-md rounded-lg p-4 password-hints-left">
                        <h4 class="text-sm font-semibold text-gray-800">Your password must contain:</h4>
                        <ul class="space-y-1 text-sm text-gray-500">
                            <li id="min-length" class="flex items-center gap-x-2">
                                <span id="min-length-check" class="hidden text-teal-500">
                                    <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="20 6 9 17 4 12"></polyline>
                                    </svg>
                                </span>
                                <span id="min-length-uncheck" class="text-red-500">
                                    <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M18 6 6 18"></path>
                                        <path d="m6 6 12 12"></path>
                                    </svg>
                                </span>
                                Minimum number of characters is 6.
                            </li>
                            <li id="lowercase" class="flex items-center gap-x-2">
                                    <span id="lowercase-check" class="hidden text-teal-500">
                                        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="20 6 9 17 4 12"></polyline>
                                        </svg>
                                    </span>
                                <span id="lowercase-uncheck" class="text-red-500">
                                        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </span>
                                Should contain lowercase.
                            </li>
                            <li id="uppercase" class="flex items-center gap-x-2">
                                    <span id="uppercase-check" class="hidden text-teal-500">
                                        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="20 6 9 17 4 12"></polyline>
                                        </svg>
                                    </span>
                                <span id="uppercase-uncheck" class="text-red-500">
                                        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </span>
                                Should contain uppercase.
                            </li>
                            <li id="numbers" class="flex items-center gap-x-2">
                                    <span id="numbers-check" class="hidden text-teal-500">
                                        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="20 6 9 17 4 12"></polyline>
                                        </svg>
                                    </span>
                                <span id="numbers-uncheck" class="text-red-500">
                                        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </span>
                                Should contain numbers.
                            </li>
                            <li id="special-characters" class="flex items-center gap-x-2">
                                    <span id="special-characters-check" class="hidden text-teal-500">
                                        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="20 6 9 17 4 12"></polyline>
                                        </svg>
                                    </span>
                                <span id="special-characters-uncheck" class="text-red-500">
                                        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </span>
                                Should contain special characters.
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2" for="re-password">
                    Re-type Password
                </label>
                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="re-password" type="password" placeholder="Re-type Password">
            </div>
            <div class="text-center text-gray-600 text-sm mb-4">
                <label class="block">
                    <input id="terms" class="mr-2 leading-tight" type="checkbox">
                    <span class="text-sm">
                        I agree to the
                        <a href="https://www.termsfeed.com/live/e86b25de-50be-4c1b-b5ee-c65080b2bd5f" class="text-blue-500 hover:text-blue-800" target="_blank" rel="noopener noreferrer">
                            Terms of Use
                        </a>
                        and
                        <a href="https://www.privacypolicies.com/live/701346aa-136e-4a6e-bca3-deea2d36515c" class="text-blue-500 hover:text-blue-800" target="_blank" rel="noopener noreferrer">
                            Privacy Policy
                        </a>.
                    </span>
                </label>
            </div>

            <div id="error-message" class="error-message">You must agree to the Terms and Policy to sign up.</div>

            <div class="flex items-center justify-between">
                <button id="sign-up-btn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full mb-3" type="button">
                    Sign Up
                </button>
            </div>

            <div class="text-center text-gray-600 text-sm mb-4">
                <a href="/login" class="text-blue-500 hover:text-blue-800">Have an account? Login</a>
            </div>
        </form>
    </div>
</div>

<script>
    const passwordInput = document.getElementById('password');
    const hintsContainer = document.getElementById('password-hints');
    const rules = {
        minLength: document.getElementById('min-length'),
        lowercase: document.getElementById('lowercase'),
        uppercase: document.getElementById('uppercase'),
        numbers: document.getElementById('numbers'),
        specialCharacters: document.getElementById('special-characters')
    };
    const checks = {
        minLength: document.getElementById('min-length-check'),
        lowercase: document.getElementById('lowercase-check'),
        uppercase: document.getElementById('uppercase-check'),
        numbers: document.getElementById('numbers-check'),
        specialCharacters: document.getElementById('special-characters-check')
    };
    const unchecks = {
        minLength: document.getElementById('min-length-uncheck'),
        lowercase: document.getElementById('lowercase-uncheck'),
        uppercase: document.getElementById('uppercase-uncheck'),
        numbers: document.getElementById('numbers-uncheck'),
        specialCharacters: document.getElementById('special-characters-uncheck')
    };

    passwordInput.addEventListener('focus', () => {
        hintsContainer.classList.remove('hidden');
    });

    passwordInput.addEventListener('blur', () => {
        hintsContainer.classList.add('hidden');
    });

    passwordInput.addEventListener('input', () => {
        const value = passwordInput.value;
        checkRule('minLength', value.length >= 6);
        checkRule('lowercase', /[a-z]/.test(value));
        checkRule('uppercase', /[A-Z]/.test(value));
        checkRule('numbers', /\d/.test(value));
        checkRule('specialCharacters', /[!@#$%^&*(),.?":{}|<>]/.test(value));
    });

    function checkRule(rule, isValid) {
        if (isValid) {
            checks[rule].classList.remove('hidden');
            unchecks[rule].classList.add('hidden');
            rules[rule].classList.add('text-teal-500');
            rules[rule].classList.remove('text-red-500');
        } else {
            checks[rule].classList.add('hidden');
            unchecks[rule].classList.remove('hidden');
            rules[rule].classList.remove('text-teal-500');
            rules[rule].classList.add('text-red-500');
        }
    }
</script>

<script>
    const signUpBtn = document.getElementById('sign-up-btn');
    const termsCheckbox = document.getElementById('terms');
    const errorMessage = document.getElementById('error-message');

    signUpBtn.addEventListener('click', () => {
        if (!termsCheckbox.checked) {
            errorMessage.style.display = 'block';
        } else {
            errorMessage.style.display = 'none';
            // Redirection vers la page /home
            window.location.href = '/home';
        }
    });

</script>
</body>
</html>
